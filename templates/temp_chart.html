<!-- http://127.0.0.1:8080/physicals/chart -->
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>体温グラフ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='base-style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>体温グラフ</h1>
    <ul class="breadcrumb">
        <li><a href="{{ url_for('index') }}">HOME</a></li>
        <li><a href="{{ url_for('physical.list') }}">アンケート一覧</a></li>
    </ul>
    <!-- ここにユーザーを選択するボタンを追加 -->
     
    <canvas id="tempChart" height="200" width="400"></canvas>
    <script>
        // APIからデータを取得してグラフを作成
        fetch('/physicals/data')
            .then(response => response.json())
            .then(data => {  // JSON形式の文字列をJavaScriptで使えるように変換
                const labels = data.map(item => `${item.user} (ID: ${item.id})`);
                const temperatures = data.map(item => item.temp);  // 体温データのリストを生成

                // グラフの描画(Chart.jsを使用)
                const ctx = document.getElementById('tempChart').getContext('2d'); // グラフが描画されるキャンバス要素取得、2D描画
                new Chart(ctx, { // 指定したコンテキスト(ctx)にグラフを描画
                    type: 'line',
                    data: {
                        labels: labels, // X軸ラベル
                        datasets: [{
                            label: '体温 (℃)',
                            data: temperatures, // 体温データ
                            borderColor: 'rgba(0, 128, 255, 1)',
                            backgroundColor: 'rgba(0, 128, 255, 0.5)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: { // グラフの「軸」に関する設定
                            y: {
                                beginAtZero: false, // Y軸の目盛りを「0」から始める
                                title: {
                                    display: true, // 軸のタイトルを表示するかどうか
                                    text: '体温 (℃)'
                                }
                            },
                            x: {
                                title: {
                                    display: false,
                                }
                            }
                        }
                    }
                });
            });
    </script>
</body>
</html>
